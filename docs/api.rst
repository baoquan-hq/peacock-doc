接口
===============

初始化客户端
------------------
::
	BaoquanClient client = new BaoquanClient();
    //设置api地址，比如保全网的测试环境地址
	client.setHost("https://api.baoquan.com");
    // 设置access key
	client.setAccessKey("fsBswNzfECKZH9aWyh47fc");
    // 设置rsa私钥文件的绝对路径
	client.setPemPath("path/to/rsa_private.pem");
    // 设置版本
	client.setVersion("v3");

内容保全 - /attestations/text
----------------------

客户在保全网站上建好模板之后通过该接口传输模板渲染需要的数据。

payload
^^^^^^^^^^^^^^^

=================  ======================================= ================
参数名 				描述                                    是否可选
=================  ======================================= ================
unique_id          String字符串，不超过255位，保全唯一码          必选
template_id        String字符串，模板id                       必选
identities         Object对象，身份事项                        必选
factoids           数组对象，陈述集                           必选
transaction_id     外部事物id                               非必选
=================  ======================================= ================

返回的data
^^^^^^^^^^^^^^

调用保全接口成功后会返回保全号

=================  ================================
字段名 				描述
=================  ================================
no                 String字符串，保全号
=================  ================================

文件保全 - /attestations/file
----------------------

上传文件进行存证

payload
^^^^^^^^^^^^^^^

=================  ======================================= ================
参数名 				描述                                    是否可选
=================  ======================================= ================
unique_id          String字符串，不超过255位，保全唯一码          必选
template_id        String字符串，模板id                       必选
identities         Object对象，身份事项                        必选
factoids           数组对象，陈述集                           必选
transaction_id       外部事物id                               非必选
attachment           附件                                     必选
=================  ======================================= ================

返回的data
^^^^^^^^^^^^^^

调用保全接口成功后会返回保全号

=================  ================================
字段名 				描述
=================  ================================
no                 String字符串，保全号
=================  ================================

保全（sha256） - /attestations/hash
------------------------------------
客户在保全网站上建好模板（文件HASH上传）之后通过该接口传输模板渲染需要的数据。

payload
^^^^^^^^^^^^^^^
=================  ======================================= ================
参数名 				描述                                    是否可选
=================  ======================================= ================
unique_id          String字符串，不超过255位，保全唯一码      必选
template_id        String字符串，模板（文件HASH模板）id       必选
identities         Object对象，身份事项                       必选
factoids           数组对象，陈述集                           必选
sha256             文件的sha256值                             必选
transaction_id       外部事物id                               非必选
=================  ======================================= ================

返回的data
^^^^^^^^^^^^^^

调用保全接口成功后会返回保全号

=================  ================================
字段名 				描述
=================  ================================
no                 String字符串，保全号
=================  ================================

网页取证 - /attestations/url
------------------------------------
根据网页地址固定证据

payload
^^^^^^^^^^^^^^^
=================  ======================================= ================
参数名 				描述                                    是否可选
=================  ======================================= ================
unique_id            保全唯一码                                   必选
template_id          模板id                                      必选
identities           Object对象，身份事项                         必选
factoids             数组对象，陈述集                             必选
mode                 网页url模式选择                              必选
url                  网页地址                                    必选
transaction_id       外部事物id                                  非必选
evidenceName         取证名称                                   非必选
evidenceLabel        取证标签                                    非必选
callBackUrl          回调地址                                   非必选
=================  ======================================= ================
模式一是提交取证后自动完成取证存证上链步骤，模式二是提交取证后 需再次确认存证上链  中间可以获取取证图片查看是否满足需要


返回的data
^^^^^^^^^^^^^^

调用保全接口成功后会返回保全号

=================  ================================
字段名 				描述
=================  ================================
no                 String字符串，保全号
=================  ================================

网页取证第二步 - /attestations/url/confirm
------------------------------------
模式二 网页取证第二步

payload
^^^^^^^^^^^^^^^
=================  ======================================= ================
参数名 				描述                                    是否可选
=================  ======================================= ================
no                    保全号                                    必选
=================  ======================================= ================

返回的data
^^^^^^^^^^^^^^

调用保全接口成功应答成功状态


网页取证模式二 展示图片 - /attestations/url/img
------------------------------------
网页取证模式二 展示图片

payload
^^^^^^^^^^^^^^^
=================  ======================================= ================
参数名 				描述                                    是否可选
=================  ======================================= ================
no          保全号      必选
=================  ======================================= ================

返回的data
^^^^^^^^^^^^^^

返回的相关信息

=================  ================================
字段名 				描述
=================  ================================
no                 String字符串，取证状态
imgBase               文件base64
=================  ================================

网页取证详情查询  - /attestations/url/info
-------------------------------

过程取证详情查询

payload
^^^^^^^^^^^^^^^
=================  ============================================ ================
参数名 				描述                             是否可选
=================  ============================================ ================
no                    保全号                                       必选
=================  ============================================ ================


返回的data
^^^^^^^^^^^^^^

===================================  ====================================================================
字段名 				                             描述
===================================  ====================================================================
no                                        保全号
status                                    状态
start_time                                开始取证时间
end_time                                  结束取证时间
sm3                                      压缩包sm3
sha256                                   压缩包sha256
blockchain_hash                              链上hash值
imgUrl                                   图片预览地址
imgUrl                                   图片预览地址
imgUrl                                   图片预览地址
===================================  ====================================================================
状态值包含：
===============   ===================================
UNDERWAY              取证中
TWO_STAGE              待确认（2阶段取证待确认）
SUCCESSED             成功
FAILED                失败
CANCEL               取消
===============   ===================================

获取保全数据 - /attestations
-------------------------------

客户可以通过该接口获取上传的保全数据，比如身份标识、陈述列表等

payload
^^^^^^^^^^^^^^^

=================  ================================ ================
参数名 				描述                             是否可选
=================  ================================ ================
ano                String字符串，保全号               必选
=================  ================================ ================

返回的data
^^^^^^^^^^^^^^

=================  ================================================================
字段名 				描述
=================  ================================================================
no                 保全号
html               保全书html
file_hash          文件国密sm3哈希
sha256             文件sha256哈希
status             存证状态
blockchain_hash    链上哈希
attestation_at     存证时间
=================  ================================================================

下载保全文件 - /attestation/download
--------------------------------------------------------------

客户上传到保全数据会经过一定的处理（比如模板渲染）生成一份保全文件，这份保全文件才是最终会hash到区块链上的数据，也是最终能通过公证处出公证书或者通过司法鉴定中心出司法鉴定书的数据。

payload
^^^^^^^^^^^^^^^
=================  ======================================= ================
参数名 				描述                             是否可选
=================  ======================================= ================
ano                String字符串，保全号               必选
=================  ======================================= ================

返回的文件
^^^^^^^^^^^^^^^

该接口会返回保全文件以及文件名，文件就是http返回结果的body，文件名存放在http的header中，header的名称是Content-Disposition，header值形如::

	form-data; name=Content-Disposition; filename=5Yhus2mVSMnQRXobRJCYgt.zip

以java为例::

	// 此处省略使用apache http client构造http请求的过程
	// closeableHttpResponse是一个CloseableHttpResponse实例
	HttpEntity httpEntity = closeableHttpResponse.getEntity();
	Header header = closeableHttpResponse.getFirstHeader(MIME.CONTENT_DISPOSITION);
	Pattern pattern = Pattern.compile(".*filename=\"(.*)\".*");
	Matcher matcher = pattern.matcher(header.getValue());
	String fileName = "";
	if (matcher.matches()) {
		fileName = matcher.group(1);
	}
	FileOutputStream fileOutputStream = new FileOutputStream(fileName);
	IOUtils.copy(httpEntity.getContent(), fileOutputStream);
	fileOutputStream.close();


过程取证对接流程
-------------------------------

1、获取过程取证token

2、打开取证页面进行操作 https://process.baoquan.com/evidences/{token}

3、取消过程取证（未进入机器前）、结束过程取证（进入机器后） （此步骤根据业务需求为可选步骤，页面上有提供取消和结束按钮）

4、查询取证详情信息


过程取证获取token  - /process/token
-------------------------------

过程取证获取token

payload
^^^^^^^^^^^^^^^
=================  ======================================= ================
参数名 				描述                             是否可选
=================  ======================================= ================
unique_id           String字符串，不超过255位，保全唯一码          必选
template_id         String字符串，模板id                       必选
identities          Object对象，身份事项                        必选
factoids            数组对象，陈述集                            必选
transaction_id      外部事物id                                非必选
evidenceType        取证类型，                                 必选
nodeGroup           机器分组                                   必选
=================  ======================================= ================
evidenceType为取证类型字段当前选项为： PC（电脑端）、PHONE（手机端）
nodeGroup为取证类型为PC时的机器分组选择字段，当前可选择：peacock（不含模拟器）、peacock-mobile（包含模拟器）

返回的data
^^^^^^^^^^^^^^

=================  ================================================================
字段名 				描述
=================  ================================================================
no                   保全号
=================  ================================================================

过程取证取消  - /process/cancel
-------------------------------

取消过程取证

payload
^^^^^^^^^^^^^^^
=================  ============================================ ================
参数名 				描述                             是否可选
=================  ============================================ ================
ano                   String字符串，过程取证获取的token 值            必选
=================  ============================================ ================

返回的data
^^^^^^^^^^^^^^
取消成功 statusCode 为 000000
否则取消失败

过程取证结束  - /process/stop
-------------------------------

结束过程取证

payload
^^^^^^^^^^^^^^^
=================  ============================================ ================
参数名 				描述                             是否可选
=================  ============================================ ================
ano                   String字符串，过程取证获取的token 值         必选
=================  ============================================ ================

返回的data
^^^^^^^^^^^^^^
结束成功 statusCode 为 000000
否则结束失败

过程取证查询  - /process/info
-------------------------------

过程取证详情查询

payload
^^^^^^^^^^^^^^^
=================  ============================================ ================
参数名 				描述                             是否可选
=================  ============================================ ================
ano                    String字符串，过程取证获取的token 值           必选
=================  ============================================ ================


返回的data
^^^^^^^^^^^^^^

===================================  ====================================================================
字段名 				                             描述
===================================  ====================================================================
no                                        保全号
status                                    状态
start_time                                开始取证时间
end_time                                  结束取证时间
video_duration                             视频时长
video_url                                  视频路径
videoSha256                                 视频sha256
videoSm3                                    视频sm3
videoSize                                   视频大小
zip_sm3                                      压缩包sm3
zip_sha256                                   压缩包sha256
blockchain_hash                              链上hash值
zipTempUrl                                   压缩包临时访问路径
zipTempUrlExpiration                         压缩包临时访问路径过期时间
===================================  ====================================================================
状态值包含：
===============   ===================================
NEW                   新创建取证
FELLIN                排队中
RECORDING             取证中
UPLOAD                取证结束视频上传中
FINISHED              取证成功
FAILED                取证失败
CANCEL                取消取证
===============   ===================================

音乐取证 - /attestations/music
------------------------------------
音乐取证

payload
^^^^^^^^^^^^^^^
=================  ======================================= ================
参数名 				描述                                    是否可选
=================  ======================================= ================
unique_id            保全唯一码                                   必选
template_id          模板id                                      必选
identities           Object对象，身份事项                         必选
factoids             数组对象，陈述集                             必选
transaction_id       外部事物id                                  非必选
evidenceName         取证名称                                   非必选
evidenceLabel        取证标签                                    非必选
platform              平台，暂支持 QQ, KUGOU, KUWO, QQMV            必选
url                   地址                                    必选
song                  歌曲                                        必选
singer                歌手                                       必选
album                 专辑                                       非必选
=================  ======================================= ================



返回的data
^^^^^^^^^^^^^^

调用保全接口成功后会返回保全号

=================  ================================
字段名 				描述
=================  ================================
no                 String字符串，保全号
=================  ================================


hash存证上传文件 - evidence/hash
------------------------------------
当hash存证需要出证时，需要先上传文件 再申请出证

payload
^^^^^^^^^^^^^^^
====================  ======================================= ================
参数名 			             	描述                                     是否可选
====================  ======================================= ================
ano                       保全号                                      必选
attachment                附件文件                                      必选
====================  ======================================= ================



返回的data
^^^^^^^^^^^^^^
成功 statusCode 为 000000
否则上传失败


司法鉴定 - evidence/judicial
------------------------------------
司法鉴定接口

payload
^^^^^^^^^^^^^^^
=========================  ================================================================== ================
参数名 				                       描述                                                          是否可选
=========================  ================================================================== ================
anos                            要出证保全号（以逗号分割）                                                 必选
name                            出证名称                                                              必选
evidenceDesc                     案件描述                                                             必选
evidenceUseType                  案件类型 （0代表民事诉讼，1代表证据留存）                                  必选
address                          地址                                                                 必选
userName                         用户手机号                                                            必选
userPhone                         用户手机号                                                            必选
=========================  ================================================================== ================



返回的data
^^^^^^^^^^^^^^
成功 statusCode 为 000000
否则上传失败


公证出证 - evidence/notarization
------------------------------------
公证出证接口

payload
^^^^^^^^^^^^^^^
=================  ================================================== ================
参数名 				描述                                    是否可选
=================  ================================================== ================
anos                要出证保全号（以逗号分割）                                      必选
name                出证名称                                                    必选
address                     地址                                                必选
userName                       用户手机号                                        必选
userPhone                     用户手机号                                         必选
=================  ================================================== ================



返回的data
^^^^^^^^^^^^^^
成功 statusCode 为 000000
否则上传失败
